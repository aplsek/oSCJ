SCJWrapper RealtimeThread interface

diff -r f67a18f511f6 util/java/src/com/fiji/fivm/util/SCJWrapperGenerator.java
--- a/util/java/src/com/fiji/fivm/util/SCJWrapperGenerator.java	Tue Jun 08 22:47:49 2010 -0400
+++ b/util/java/src/com/fiji/fivm/util/SCJWrapperGenerator.java	Wed Jun 09 14:06:41 2010 -0400
@@ -16,11 +16,20 @@
 	}
 	ClassWriter cw = new ClassWriter(0);
 	cw.visit(Opcodes.V1_5, Opcodes.ACC_PUBLIC, "com/fiji/fivm/SCJMain",
-		 null, "java/lang/Object", null);
-	MethodVisitor mv = cw.visitMethod(Opcodes.ACC_PUBLIC
-					  + Opcodes.ACC_STATIC,
-					  "main", "([Ljava/lang/String;)V",
-					  null, null);
+		 null, "javax/realtime/RealtimeThread", null);
+
+	MethodVisitor mv = cw.visitMethod(Opcodes.ACC_PUBLIC, "<init>",
+					  "()V", null, null);
+	mv.visitVarInsn(Opcodes.ALOAD, 0);
+	mv.visitMethodInsn(Opcodes.INVOKESPECIAL,
+			   "javax/realtime/RealtimeThread",
+			   "<init>", "()V");
+	mv.visitInsn(Opcodes.RETURN);
+	mv.visitMaxs(1, 1);
+	mv.visitEnd();
+
+	mv = cw.visitMethod(Opcodes.ACC_PUBLIC,
+					  "run", "()V", null, null);
 	mv.visitTypeInsn(Opcodes.NEW, args[1]);
 	mv.visitInsn(Opcodes.DUP);
 	mv.visitMethodInsn(Opcodes.INVOKESPECIAL,
@@ -29,7 +38,7 @@
 	mv.visitInsn(Opcodes.DUP);
 	mv.visitMethodInsn(Opcodes.INVOKEINTERFACE,
 			   "javax/safetycritical/Safelet",
-			   "setup", "()V");
+			   "setUp", "()V");
 	mv.visitInsn(Opcodes.DUP);
 	mv.visitMethodInsn(Opcodes.INVOKEINTERFACE,
 			   "javax/safetycritical/Safelet",
@@ -40,7 +49,22 @@
 			   "start", "()V");
 	mv.visitMethodInsn(Opcodes.INVOKEINTERFACE,
 			   "javax/safetycritical/Safelet",
-			   "teardown", "()V");
+			   "tearDown", "()V");
+	mv.visitInsn(Opcodes.RETURN);
+	mv.visitMaxs(2, 1);
+	mv.visitEnd();
+
+	mv = cw.visitMethod(Opcodes.ACC_PUBLIC
+					  + Opcodes.ACC_STATIC,
+					  "main", "([Ljava/lang/String;)V",
+					  null, null);
+	mv.visitTypeInsn(Opcodes.NEW, "com/fiji/fivm/SCJMain");
+	mv.visitInsn(Opcodes.DUP);
+	mv.visitMethodInsn(Opcodes.INVOKESPECIAL,
+			   "com/fiji/fivm/SCJMain", "<init>", "()V");
+	mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL,
+			   "com/fiji/fivm/SCJMain",
+			   "start", "()V");
 	mv.visitInsn(Opcodes.RETURN);
 	mv.visitMaxs(2, 1);
 	mv.visitEnd();
@@ -51,3 +75,4 @@
 	fos.close();
     }
 }
+
